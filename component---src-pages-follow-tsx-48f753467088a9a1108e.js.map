{"version":3,"file":"component---src-pages-follow-tsx-48f753467088a9a1108e.js","mappings":"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","sources":["webpack://in-the-loop/./src/features/follow/followApi.ts","webpack://in-the-loop/./src/features/follow/FollowResults.tsx","webpack://in-the-loop/./src/features/follow/follow.module.css","webpack://in-the-loop/./src/features/follow/FollowVehicle.tsx","webpack://in-the-loop/./src/pages/follow.tsx","webpack://in-the-loop/./src/components/Container.tsx","webpack://in-the-loop/./src/components/TransitIcon.tsx","webpack://in-the-loop/./src/styles/palette.tsx","webpack://in-the-loop/./src/features/navigate/Placeholder.tsx"],"sourcesContent":["const endpointUrl = \"https://9fqgf0uli3.execute-api.us-east-2.amazonaws.com/Prod/in-the-loop\";\n\nexport interface Stop {\n  stopId: string;\n  stopName: string;\n  time: string;\n  isApproaching?: boolean;\n  isDelayed?: boolean;\n  isLive?: boolean;\n}\n\nexport interface FollowVehicleResponse {\n  transitType: 'train' | 'bus';\n  route: string;\n  run: string;\n  destination?: string;\n  direction?: string;\n  arrivals: Stop[];\n}\n\ninterface FollowVehicleRequest {\n  run: string;\n  transitType: 'train' | 'bus';\n}\n\nexport async function followVehicleFetcher(\n  req: FollowVehicleRequest\n): Promise<{ response: FollowVehicleResponse, lastUpdated: Date }> {\n  const { run, transitType } = req;\n  const url = new URL(`${endpointUrl}/follow-vehicle`);\n  url.searchParams.set('run', run);\n  url.searchParams.set('transit', transitType);\n\n  try {\n    console.log(`fetch follow-vehicle: ${transitType} run ${run}`);\n    const response = await fetch(url);\n    if (!response.ok) {\n      console.error(`HTTP error! status: ${response.status}`);\n      const data = await response.json();\n      console.error(`Error response: ${JSON.stringify(data, null, 2)}`);\n      throw new Error(`HTTP error! status: ${response.status}`);\n    }\n    const data = await response.json();\n    console.log('Follow vehicle API response:', data);\n    return { response: data.follow, lastUpdated: new Date() };\n  } catch (error) {\n    console.error(\"Error fetching follow vehicle data:\", error);\n    throw error;\n  }\n}\n","import { Empty, Result, Skeleton, Table } from \"antd\";\nimport { ColumnType } from \"antd/lib/table\";\nimport * as React from \"react\";\nimport { FaTimesCircle } from \"react-icons/fa\";\nimport { GiParkBench } from \"react-icons/gi\";\nimport useSWR from \"swr\";\nimport Container from \"../../components/Container\";\nimport Countdown from \"../../components/Countdown\";\nimport Live from \"../../components/Live\";\nimport Span from \"../../components/Span\";\nimport TimeDisplay from \"../../components/TimeDisplay\";\nimport TransitIcon from \"../../components/TransitIcon\";\nimport * as styles from \"./follow.module.css\";\nimport { followVehicleFetcher, Stop } from \"./followApi\";\n\nconst REFRESH_INTERVAL = 15000;\nconst LIVE_THRESHOLD = 30000;\n\nconst isRecentUpdate = (lastUpdated: Date | undefined) => {\n  return !!lastUpdated && (new Date().getTime() - lastUpdated.getTime()) < LIVE_THRESHOLD;\n}\n\ntype FollowResultsProps = {\n  runNumber: string;\n  transitType: 'train' | 'bus';\n};\n\nconst columns: ColumnType<Stop>[] = [\n  {\n    title: 'Stop',\n    dataIndex: 'stopName',\n    key: 'stopName',\n    width: '50%',\n  },\n  {\n    title: 'Arrival Time',\n    dataIndex: 'time',\n    key: 'time',\n    width: '25%',\n    render: (text: string) => <TimeDisplay dateStr={text} />,\n  },\n  {\n    title: 'Countdown',\n    dataIndex: 'time',\n    key: 'countdown',\n    width: '25%',\n    render: (text: string, record: Stop) => (\n      <Countdown dateStr={text} isApproaching={record.isApproaching} />\n    ),\n  },\n];\n\nconst FollowResults: React.FC<FollowResultsProps> = ({ runNumber, transitType }) => {\n  const [isLive, setIsLive] = React.useState(false);\n  const [isFirstLoad, setIsFirstLoad] = React.useState(true);\n\n  const { data, error, isValidating, mutate } = useSWR(\n    runNumber ? { run: runNumber, transitType } : null,\n    followVehicleFetcher,\n    {\n      refreshInterval: REFRESH_INTERVAL,\n      keepPreviousData: true,\n    }\n  );\n\n  const vehicleData = data?.response;\n  const lastUpdated = data?.lastUpdated;\n  const hasArrivals = vehicleData?.arrivals && vehicleData.arrivals.length > 0;\n\n  React.useEffect(() => {\n    console.log('=== FollowResults Debug ===');\n    console.log('data:', data);\n    console.log('vehicleData:', vehicleData);\n    console.log('hasArrivals:', hasArrivals);\n    console.log('arrivals array:', vehicleData?.arrivals);\n    console.log('isValidating:', isValidating);\n    console.log('isFirstLoad:', isFirstLoad);\n    console.log('error:', error);\n  }, [data, vehicleData, hasArrivals, isValidating, isFirstLoad, error]);\n\n  React.useEffect(() => {\n    if (!isValidating && isFirstLoad) {\n      setIsFirstLoad(false);\n    }\n  }, [isValidating]);\n\n  // live data indicator\n  React.useEffect(() => {\n    setIsLive(isRecentUpdate(lastUpdated));\n    const intervalId = setInterval(() => {\n      setIsLive(isRecentUpdate(lastUpdated));\n    }, 1000);\n\n    return () => clearInterval(intervalId);\n  }, [lastUpdated]);\n\n  const handleLiveClick = () => {\n    mutate();\n  };\n\n  if (!runNumber) {\n    return null;\n  }\n\n  return (\n    <Container>\n      {error ? (\n        <Container>\n          <Result\n            status=\"warning\"\n            title={\n              <span className={styles.errorTitle}>No Results</span>\n            }\n            subTitle=\"We were unable to follow that vehicle\"\n            icon={\n              <FaTimesCircle className={styles.errorIcon} />\n            }\n          />\n        </Container>\n\n      ) : isFirstLoad ? (\n        <Container>\n          <Skeleton active />\n        </Container>\n\n      ) : !hasArrivals ? (\n        <Container>\n          <Empty description=\"No vehicle found with this run number\" image={<GiParkBench size={84} />} />\n        </Container>\n\n      ) : (\n        <>\n          <Container bottom={16}>\n            <div className={styles.titleContainer}>\n              <Span size={0}>\n                <h2 className={styles.titleText}>\n                  <TransitIcon type={vehicleData.transitType} route={vehicleData.route} />\n                  <span className={styles.runNumber}>Run #{vehicleData.run}</span>\n                </h2>\n                <div>\n                  {vehicleData.transitType === 'train' ? (\n                    <>\n                      {vehicleData.route}\n                      {vehicleData.destination && ` to ${vehicleData.destination}`}\n                    </>\n                  ) : (\n                    <>\n                      {vehicleData.route} Bus\n                      {vehicleData.destination && ` to ${vehicleData.destination}`}\n                      {vehicleData.direction && ` (${vehicleData.direction})`}\n                    </>\n                  )}\n                </div>\n              </Span>\n              <Span left={10} right={0}>\n                <Live isLive={isLive} onClick={handleLiveClick} />\n              </Span>\n            </div>\n          </Container>\n\n          <Container>\n            <h4 className={styles.alignLeft}>Upcoming Stops</h4>\n            <Table\n              columns={columns}\n              dataSource={vehicleData.arrivals}\n              pagination={false}\n              rowKey={(record) => record.stopId}\n              size=\"middle\"\n              showHeader={false}\n            />\n          </Container>\n        </>\n      )}\n    </Container>\n  );\n};\n\nexport default FollowResults;\n","// extracted by mini-css-extract-plugin\nexport var alignLeft = \"follow-module--alignLeft--579c3\";\nexport var errorIcon = \"follow-module--errorIcon--ea243\";\nexport var errorTitle = \"follow-module--errorTitle--62620\";\nexport var fullWidth = \"follow-module--fullWidth--dcff6\";\nexport var label = \"follow-module--label--94382\";\nexport var runNumber = \"follow-module--runNumber--5d263\";\nexport var titleContainer = \"follow-module--titleContainer--ed088\";\nexport var titleText = \"follow-module--titleText--bfb9f\";\nexport var warningIcon = \"follow-module--warningIcon--1a49c\";","import { useLocation } from '@reach/router';\nimport { Input } from 'antd';\nimport { navigate } from 'gatsby';\nimport React from 'react';\nimport { FaRoute } from 'react-icons/fa';\nimport Container from '../../components/Container';\nimport Placeholder from '../navigate/Placeholder';\nimport FollowResults from './FollowResults';\n\ntype FollowVehicleProps = {\n  showSearch?: boolean;\n};\n\nconst FollowVehicle: React.FC<FollowVehicleProps> = ({ showSearch = true }) => {\n  const location = useLocation();\n  const params = new URLSearchParams(location.search);\n  const runNumberFromUrl = params.get('run') || '';\n\n  const [runNumber, setRunNumber] = React.useState(runNumberFromUrl);\n  const [searchValue, setSearchValue] = React.useState(runNumberFromUrl);\n\n  // Derive transit type from run number\n  const transitType: 'train' | 'bus' = runNumber && runNumber.length > 3 ? 'bus' : 'train';\n\n  // Determine transit type and format run number based on length\n  const determineTransitTypeAndFormat = (value: string): { transitType: 'train' | 'bus'; formattedRun: string } => {\n    const numericValue = value.replace(/\\D/g, ''); // Remove non-digits\n\n    if (numericValue.length === 0) {\n      return { transitType: 'train', formattedRun: '' };\n    }\n\n    if (numericValue.length <= 3) {\n      // Train: pad with leading zeros to make it 3 digits\n      return {\n        transitType: 'train',\n        formattedRun: numericValue.padStart(3, '0')\n      };\n    } else {\n      // Bus: more than 3 digits\n      return {\n        transitType: 'bus',\n        formattedRun: numericValue\n      };\n    }\n  };\n\n  React.useEffect(() => {\n    const params = new URLSearchParams(location.search);\n    const urlRun = params.get('run') || '';\n    setRunNumber(urlRun);\n    setSearchValue(urlRun);\n  }, [location.search]);\n\n  const onSearch = (value: string) => {\n    const { formattedRun } = determineTransitTypeAndFormat(value);\n\n    if (formattedRun) {\n      navigate(`/follow?run=${encodeURIComponent(formattedRun)}`);\n    } else {\n      navigate('/follow');\n    }\n  };\n\n  const onChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const value = event.target.value;\n    // Only allow numeric digits\n    const numericValue = value.replace(/\\D/g, '');\n    setSearchValue(numericValue);\n  };\n\n  return (\n    <Container width={600}>\n      {showSearch && (\n        <Container>\n          <Input.Search\n            placeholder=\"Enter run number\"\n            value={searchValue}\n            size=\"large\"\n            allowClear autoFocus\n            onSearch={onSearch} onChange={onChange}\n            inputMode=\"numeric\"\n          />\n        </Container>\n      )}\n\n      <Container size={16}>\n        {runNumber === \"\" ? (\n          <Placeholder\n            description=\"Enter a train or bus run number to follow its location\"\n            icon={<FaRoute />}\n          />\n        ) : (\n          <FollowResults runNumber={runNumber} transitType={transitType} />\n        )}\n      </Container>\n    </Container>\n  );\n};\n\nexport default FollowVehicle;\n","import { useLocation } from '@reach/router';\nimport React from 'react';\nimport BackButton from '../components/BackButton';\nimport FollowVehicle from '../features/follow/FollowVehicle';\nimport Layout from '../features/layout/Layout';\n\ntype LocationState = {\n  source?: string;\n  fromArrivals?: boolean;\n};\n\nconst FollowPage = () => {\n  const location = useLocation();\n  const state = location.state as LocationState;\n  const fromArrivalsPage = state?.fromArrivals;\n  const source = state?.source;\n\n  return (\n    <Layout>\n      {fromArrivalsPage && source && <BackButton paths={[{ to: source, text: \"Back to Stop\" }]} />}\n      <FollowVehicle showSearch={!fromArrivalsPage} />\n    </Layout>\n  )\n};\n\nexport default FollowPage\n\nexport const Head = () => <title>In The Loop - Follow Vehicle</title>\n","import styled from \"styled-components\";\n\ninterface ContainerProps {\n  size?: number;\n  top?: number;\n  bottom?: number;\n  width?: number;\n  centered?: boolean;\n  flex?: boolean;\n}\n\nconst Container = styled('div').withConfig({\n  shouldForwardProp: (prop) => !['centered', 'flex', 'top', 'bottom', 'size', 'width'].includes(prop),\n}).attrs<ContainerProps>(({\n  size = 8, top, bottom, width, centered = false, flex = false,\n}) => ({\n  size,\n  top: top ?? size,\n  bottom: bottom ?? size,\n  width,\n  centered,\n  flex,\n})) <ContainerProps>`\n  margin: auto;\n  padding-top: ${props => props.top}px;\n  padding-bottom: ${props => props.bottom}px;\n  ${({ width }) => width && `\n    max-width: ${width}px;\n  `}\n  ${({ centered }) => centered && `\n    text-align: center;\n    justify-content: center;\n  `}\n  ${({ flex }) => flex && `\n    display: flex;\n  `}\n`\n\nexport default Container\n","import * as React from \"react\";\nimport { FaTrainSubway } from \"react-icons/fa6\";\nimport styled from 'styled-components';\nimport { getTrainColor, palette } from '../styles/palette';\n\nconst BusIcon = styled.span`\n  display: inline-block;\n  background-color: ${palette.bus};\n  color: white;\n  padding: 0px 2px;\n  border-radius: 4px;\n  font-weight: 600;\n  text-align: center;\n  min-width: 24px;\n`;\n\nconst TrainIcon = styled(FaTrainSubway)`\n  vertical-align: middle;\n  font-size: 20px;\n`\n\ninterface TransitIconProps {\n  type: 'train' | 'bus';\n  route: string;\n}\n\nconst TransitIcon: React.FC<TransitIconProps> = ({ type, route }) => {\n  if (type === 'bus') {\n    return (\n      <BusIcon>{route}</BusIcon>\n    );\n  } else {\n    return (\n      <span>\n        <TrainIcon color={getTrainColor(route)} />\n      </span>\n    );\n  }\n}\n\nexport default TransitIcon\n","export const palette = {\n  primary: '#2166b1',\n  bus: '#0b67be',\n  alertRed: '#db0000',\n}\n\nexport const getTrainColor = (route: string): string => {\n  const trainColorsMap: { [key: string]: string } = {\n    \"Red\": \"#c60c30\",\n    \"Red Line\": \"#c60c30\",\n    \"Blue\": \"#00a1de\",\n    \"Blue Line\": \"#00a1de\",\n    \"Brown\": \"#62361b\",\n    \"Brown Line\": \"#62361b\",\n    \"Green\": \"#009b3a\",\n    \"Green Line\": \"#009b3a\",\n    \"Orange\": \"#f9461c\",\n    \"Orange Line\": \"#f9461c\",\n    \"Pink\": \"#e27ea6\",\n    \"Pink Line\": \"#e27ea6\",\n    \"Purple\": \"#522398\",\n    \"Purple Line\": \"#522398\",\n    \"Yellow\": \"#f9e300\",\n    \"Yellow Line\": \"#f9e300\",\n  }\n  return trainColorsMap[route] || \"#000000\"\n}\n","import { Empty } from 'antd';\nimport React, { ReactElement } from 'react';\n\nconst lightGrey = \"#d9d9d9\";\n\ninterface PlaceholderProps {\n  description: string;\n  icon: ReactElement<{ color?: string; size?: number }>;\n}\n\nconst Placeholder: React.FC<PlaceholderProps> = ({ description, icon }) => {\n  const styledIcon = React.cloneElement(icon, {\n    color: lightGrey,\n    size: 84,\n  });\n\n  return (\n    <Empty\n      description={description}\n      image={styledIcon}\n    />\n  );\n};\n\nexport default Placeholder;\n"],"names":["async","followVehicleFetcher","req","run","transitType","url","URL","searchParams","set","console","log","response","fetch","ok","error","status","data","json","JSON","stringify","Error","follow","lastUpdated","Date","isRecentUpdate","getTime","columns","title","dataIndex","key","width","render","text","React","TimeDisplay","dateStr","record","Countdown","isApproaching","_ref","runNumber","isLive","setIsLive","isFirstLoad","setIsFirstLoad","isValidating","mutate","useSWR","refreshInterval","keepPreviousData","vehicleData","hasArrivals","arrivals","length","intervalId","setInterval","clearInterval","Container","className","subTitle","icon","FaTimesCircle","active","bottom","Span","size","TransitIcon","type","route","destination","direction","left","right","Live","onClick","handleLiveClick","dataSource","pagination","rowKey","stopId","showHeader","description","image","GiParkBench","showSearch","location","useLocation","runNumberFromUrl","URLSearchParams","search","get","setRunNumber","searchValue","setSearchValue","urlRun","Search","placeholder","value","allowClear","autoFocus","onSearch","formattedRun","numericValue","replace","padStart","determineTransitTypeAndFormat","navigate","encodeURIComponent","onChange","event","target","inputMode","Placeholder","FaRoute","FollowResults","FollowPage","state","fromArrivalsPage","fromArrivals","source","Layout","BackButton","paths","to","FollowVehicle","Head","styled","withConfig","shouldForwardProp","prop","includes","attrs","top","centered","flex","props","_ref2","_ref3","_ref4","BusIcon","span","palette","bus","TrainIcon","FaTrainSubway","color","getTrainColor","primary","alertRed","styledIcon"],"sourceRoot":""}